
<!DOCTYPE html>


<html lang="en" data-content_root="../../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>7. Sub-package Structure &#8212; ophyd-async 0.10.2.dev2+g5eb9815bb documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  <!--
    this give us a css class that will be invisible only if js is disabled
  -->
  <noscript>
    <style>
      .pst-js-only { display: none !important; }

    </style>
  </noscript>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../_static/styles/theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />
<link href="../../_static/styles/pydata-sphinx-theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />

    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../../_static/plot_directive.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-design.min.css?v=95c83b7e" />
    <link rel="stylesheet" type="text/css" href="../../_static/custom.css?v=3fefa004" />
  
  <!-- So that users can add custom icons -->
  <script src="../../_static/scripts/fontawesome.js?digest=8878045cc6db502f8baf"></script>
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf" />
<link rel="preload" as="script" href="../../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf" />

    <script src="../../_static/documentation_options.js?v=63d1e3e6"></script>
    <script src="../../_static/doctools.js?v=9bcbadda"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../../_static/copybutton.js?v=30646c52"></script>
    <script src="../../_static/design-tabs.js?v=f930bc37"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'explanations/decisions/0007-subpackage-structure';</script>
    <script>
        DOCUMENTATION_OPTIONS.theme_version = '0.16.1';
        DOCUMENTATION_OPTIONS.theme_switcher_json_url = 'https://blueskyproject.io/ophyd-async/switcher.json';
        DOCUMENTATION_OPTIONS.theme_switcher_version_match = 'main';
        DOCUMENTATION_OPTIONS.show_version_warning_banner =
            false;
        </script>
    <link rel="icon" href="../../_static/ophyd-favicon.svg"/>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="8. Settle on Signal Types" href="0008-signal-types.html" />
    <link rel="prev" title="6. Procedural Device Definitions" href="0006-procedural-device-definitions.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  <meta name="docsearch:version" content="main" />
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <dialog id="pst-search-dialog">
    
<form class="bd-search d-flex align-items-center"
      action="../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
  </dialog>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
<div class="bd-header__inner bd-page-width">
  <button class="pst-navbar-icon sidebar-toggle primary-toggle" aria-label="Site navigation">
    <span class="fa-solid fa-bars"></span>
  </button>
  
  
  <div class="col-lg-3 navbar-header-items__start">
    
      <div class="navbar-item">

  
    
  

<a class="navbar-brand logo" href="../../index.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../../_static/ophyd-async-logo.svg" class="logo__image only-light" alt="ophyd-async 0.10.2.dev2+g5eb9815bb documentation - Home"/>
    <img src="../../_static/ophyd-async-logo.svg" class="logo__image only-dark pst-js-only" alt="ophyd-async 0.10.2.dev2+g5eb9815bb documentation - Home"/>
  
  
</a></div>
    
  </div>
  
  <div class="col-lg-9 navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../tutorials.html">
    Tutorials
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../how-to.html">
    How-to Guides
  </a>
</li>


<li class="nav-item current active">
  <a class="nav-link nav-internal" href="../../explanations.html">
    Explanations
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../reference.html">
    Reference
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-external" href="https://blueskyproject.io">
    Bluesky Project
  </a>
</li>

  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
        </div>
      
      
        <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
      
        <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/bluesky/ophyd-async" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-square-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://pypi.org/project/ophyd-async" title="PyPI" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fas fa-cube fa-lg" aria-hidden="true"></i>
            <span class="sr-only">PyPI</span></a>
        </li>
</ul></div>
      
        <div class="navbar-item">
<div class="version-switcher__container dropdown pst-js-only">
  <button id="pst-version-switcher-button-2"
    type="button"
    class="version-switcher__button btn btn-sm dropdown-toggle"
    data-bs-toggle="dropdown"
    aria-haspopup="listbox"
    aria-controls="pst-version-switcher-list-2"
    aria-label="Version switcher list"
  >
    Choose version  <!-- this text may get changed later by javascript -->
    <span class="caret"></span>
  </button>
  <div id="pst-version-switcher-list-2"
    class="version-switcher__menu dropdown-menu list-group-flush py-0"
    role="listbox" aria-labelledby="pst-version-switcher-button-2">
    <!-- dropdown will be populated by javascript on page load -->
  </div>
</div></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
    </div>
  

  
    <button class="pst-navbar-icon sidebar-toggle secondary-toggle" aria-label="On this page">
      <span class="fa-solid fa-outdent"></span>
    </button>
  
</div>

    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <dialog id="pst-primary-sidebar-modal"></dialog>
      <div id="pst-primary-sidebar" class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          
          
            <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../tutorials.html">
    Tutorials
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../how-to.html">
    How-to Guides
  </a>
</li>


<li class="nav-item current active">
  <a class="nav-link nav-internal" href="../../explanations.html">
    Explanations
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../reference.html">
    Reference
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-external" href="https://blueskyproject.io">
    Bluesky Project
  </a>
</li>

  </ul>
</nav></div>
          
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
        
          <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/bluesky/ophyd-async" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-square-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://pypi.org/project/ophyd-async" title="PyPI" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fas fa-cube fa-lg" aria-hidden="true"></i>
            <span class="sr-only">PyPI</span></a>
        </li>
</ul></div>
        
          <div class="navbar-item">
<div class="version-switcher__container dropdown pst-js-only">
  <button id="pst-version-switcher-button-3"
    type="button"
    class="version-switcher__button btn btn-sm dropdown-toggle"
    data-bs-toggle="dropdown"
    aria-haspopup="listbox"
    aria-controls="pst-version-switcher-list-3"
    aria-label="Version switcher list"
  >
    Choose version  <!-- this text may get changed later by javascript -->
    <span class="caret"></span>
  </button>
  <div id="pst-version-switcher-list-3"
    class="version-switcher__menu dropdown-menu list-group-flush py-0"
    role="listbox" aria-labelledby="pst-version-switcher-button-3">
    <!-- dropdown will be populated by javascript on page load -->
  </div>
</div></div>
        
      </div>
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
<nav class="bd-docs-nav bd-links"
     aria-label="Section Navigation">
  <p class="bd-links__title" role="heading" aria-level="1">Section Navigation</p>
  <div class="bd-toc-item navbar-nav"><ul class="current nav bd-sidenav">
<li class="toctree-l1 current active has-children"><a class="reference internal" href="../decisions.html">Architectural Decision Records</a><details open="open"><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="0001-record-architecture-decisions.html">1. Record architecture decisions</a></li>
<li class="toctree-l2"><a class="reference internal" href="0002-switched-to-python-copier-template.html">2. Adopt python-copier-template for project structure</a></li>
<li class="toctree-l2"><a class="reference internal" href="0003-ophyd-async-migration.html">3. Ophyd Async migration</a></li>
<li class="toctree-l2"><a class="reference internal" href="0004-repository-structure.html">4. Repository Structure</a></li>
<li class="toctree-l2"><a class="reference internal" href="0005-respect-black-line-length.html">5. Respect black line length</a></li>
<li class="toctree-l2"><a class="reference internal" href="0006-procedural-device-definitions.html">6. Procedural Device Definitions</a></li>
<li class="toctree-l2 current active"><a class="current reference internal" href="#">7. Sub-package Structure</a></li>
<li class="toctree-l2"><a class="reference internal" href="0008-signal-types.html">8. Settle on Signal Types</a></li>
<li class="toctree-l2"><a class="reference internal" href="0009-procedural-vs-declarative-devices.html">9. Procedural vs Declarative Devices</a></li>
<li class="toctree-l2"><a class="reference internal" href="0010-docstring-format.html">10. Decide on docstring format</a></li>
</ul>
</details></li>
<li class="toctree-l1"><a class="reference internal" href="../declarative-vs-procedural.html">Declarative vs Procedural Devices</a></li>
<li class="toctree-l1"><a class="reference internal" href="../design-goals.html">Design goals and differences with ophyd sync</a></li>
<li class="toctree-l1"><a class="reference internal" href="../device-connection-strategies.html">Device connection strategies</a></li>
<li class="toctree-l1"><a class="reference internal" href="../devices-signals-backends.html">Devices, Signals and their Backends</a></li>
<li class="toctree-l1"><a class="reference internal" href="../flyscanning.html">Flyscanning</a></li>
<li class="toctree-l1"><a class="reference internal" href="../where-device-logic.html">Where should Device logic live?</a></li>
</ul>
</div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
      <div class="sidebar-primary-item">
<div id="ethical-ad-placement"
      class="flat"
      data-ea-publisher="readthedocs"
      data-ea-type="readthedocs-sidebar"
      data-ea-manual="true">
</div></div>
  </div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">

<nav aria-label="Breadcrumb" class="d-print-none">
  <ul class="bd-breadcrumbs">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="../../index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    
    <li class="breadcrumb-item"><a href="../../explanations.html" class="nav-link">Explanations</a></li>
    
    
    <li class="breadcrumb-item"><a href="../decisions.html" class="nav-link">Architectural Decision Records</a></li>
    
    <li class="breadcrumb-item active" aria-current="page"><span class="ellipsis">7. Sub-package Structure</span></li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="sub-package-structure">
<h1>7. Sub-package Structure<a class="headerlink" href="#sub-package-structure" title="Link to this heading">#</a></h1>
<p>Date: 2024-04-22</p>
<section id="status">
<h2>Status<a class="headerlink" href="#status" title="Link to this heading">#</a></h2>
<p>Accepted</p>
</section>
<section id="context">
<h2>Context<a class="headerlink" href="#context" title="Link to this heading">#</a></h2>
<p><a class="reference internal" href="0004-repository-structure.html"><span class="doc std std-doc">4. Repository Structure</span></a> proposed a top level repository structure. This builds upon it, suggesting a top level structure divided into:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">ophyd_async.core</span></code>: Core classes like <code class="docutils literal notranslate"><span class="pre">Device</span></code>, <code class="docutils literal notranslate"><span class="pre">Signal</span></code> and <code class="docutils literal notranslate"><span class="pre">AsyncStatus</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ophyd_async.epics</span></code>: Epics specific signals and devices</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ophyd_async.tango</span></code>: Tango specific signals and devices</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ophyd_async.fastcs</span></code>: FastCS (EPICS or Tango) devices like PandA</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ophyd_async.planstubs</span></code>: Plan stubs for various flyscan functionality</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ophyd_async.sim</span></code>: Simulated devices for demos and tests</p></li>
</ul>
<p>This ADR proposes a public sub-package structure. The internal private structure should be flat, but can change according to the number of classes in a public package.</p>
</section>
<section id="decision">
<h2>Decision<a class="headerlink" href="#decision" title="Link to this heading">#</a></h2>
<section id="core">
<h3>core<a class="headerlink" href="#core" title="Link to this heading">#</a></h3>
<p>There will be a flat public namespace under core, with contents reimported from an underscore prefixed python files, e.g.:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">_status.py</span></code> for <code class="docutils literal notranslate"><span class="pre">AsyncStatus</span></code>, <code class="docutils literal notranslate"><span class="pre">WatchableAsyncStatus</span></code>, etc.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">_protocol.py</span></code> for <code class="docutils literal notranslate"><span class="pre">AsyncReadable</span></code>, <code class="docutils literal notranslate"><span class="pre">AsyncStageable</span></code>, etc.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">_device.py</span></code> for <code class="docutils literal notranslate"><span class="pre">Device</span></code>, <code class="docutils literal notranslate"><span class="pre">DeviceVector</span></code>, etc.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">_signal.py</span></code> for <code class="docutils literal notranslate"><span class="pre">Signal</span></code>, <code class="docutils literal notranslate"><span class="pre">SignalBackend</span></code>, <code class="docutils literal notranslate"><span class="pre">observe_signal</span></code>, etc.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">_mock.py</span></code> for <code class="docutils literal notranslate"><span class="pre">MockSignalBackend</span></code>, <code class="docutils literal notranslate"><span class="pre">get_mock_put</span></code>, etc.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">_readable.py</span></code> for <code class="docutils literal notranslate"><span class="pre">StandardReadable</span></code>, <code class="docutils literal notranslate"><span class="pre">ConfigSignal</span></code>, <code class="docutils literal notranslate"><span class="pre">HintedSignal</span></code>, etc.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">_detector.py</span></code> for <code class="docutils literal notranslate"><span class="pre">StandardDetector</span></code>, <code class="docutils literal notranslate"><span class="pre">DetectorWriter</span></code>, <code class="docutils literal notranslate"><span class="pre">DetectorController</span></code>, <code class="docutils literal notranslate"><span class="pre">TriggerInfo</span></code>, etc.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">_flyer.py</span></code> for <code class="docutils literal notranslate"><span class="pre">StandardFlyer</span></code>, <code class="docutils literal notranslate"><span class="pre">FlyerControl</span></code>, etc.</p></li>
</ul>
<p>There are some renames that will be required, e.g. <code class="docutils literal notranslate"><span class="pre">HardwareTriggeredFlyable</span></code> -&gt; <code class="docutils literal notranslate"><span class="pre">StandardFlyer</span></code></p>
</section>
<section id="epics">
<h3>epics<a class="headerlink" href="#epics" title="Link to this heading">#</a></h3>
<p>Epics modules consist of 2 sorts of classes:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">IO</span></code> classes, which are <code class="docutils literal notranslate"><span class="pre">Device</span></code> subclasses containing <code class="docutils literal notranslate"><span class="pre">Signals</span></code> that map as closely as possible to the EPICS template hierarchy. Their name matches the EPICS template with the suffix <code class="docutils literal notranslate"><span class="pre">IO</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Control</span></code> and <code class="docutils literal notranslate"><span class="pre">Writer</span></code> classes that plug into <code class="docutils literal notranslate"><span class="pre">StandardDetector</span></code> and <code class="docutils literal notranslate"><span class="pre">StandardFlyer</span></code> telling them which logic to use during various bluesky verbs.</p></li>
</ul>
<p>There should be an additional level of packages that correspond to the epics support module, and contain classes that map to the EPICS database and logic classes e.g.:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">epics.signal</span></code>: containing <code class="docutils literal notranslate"><span class="pre">epics_signal_rw</span></code>, <code class="docutils literal notranslate"><span class="pre">CaSignalBackend</span></code>, etc.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">epics.adcore</span></code>: containing <code class="docutils literal notranslate"><span class="pre">ADDriverIO</span></code>, <code class="docutils literal notranslate"><span class="pre">NDFileHdfIO</span></code>, <code class="docutils literal notranslate"><span class="pre">ADHdfWriter</span></code> etc.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">epics.adpilatus</span></code>: containing <code class="docutils literal notranslate"><span class="pre">ADPilatusIO</span></code>, <code class="docutils literal notranslate"><span class="pre">PilatusControl</span></code> etc.</p></li>
</ul>
<p>The name of the module is the EPICS module lowercased with dashes and other special characters converted to underscores.</p>
<p>They can be imported from modules:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">ophyd_async.epics</span><span class="w"> </span><span class="kn">import</span> <span class="n">adcore</span><span class="p">,</span> <span class="n">adpilatus</span>

<span class="n">drv</span> <span class="o">=</span> <span class="n">adpilatus</span><span class="o">.</span><span class="n">ADPilatusIO</span><span class="p">(</span><span class="n">prefix</span> <span class="o">+</span> <span class="s2">&quot;DRV:&quot;</span><span class="p">)</span>
<span class="n">hdf</span> <span class="o">=</span> <span class="n">adcore</span><span class="o">.</span><span class="n">NDFileHDFIO</span><span class="p">(</span><span class="n">prefix</span> <span class="o">+</span> <span class="s2">&quot;HDF:&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>The structure is left to an individual module’s size. For instance <code class="docutils literal notranslate"><span class="pre">motor</span></code> will probably be a single <code class="docutils literal notranslate"><span class="pre">motor.py</span></code>, while <code class="docutils literal notranslate"><span class="pre">ADCore</span></code> will likely be an <code class="docutils literal notranslate"><span class="pre">ADCore/</span></code> directory with <code class="docutils literal notranslate"><span class="pre">_io.py</span></code>, <code class="docutils literal notranslate"><span class="pre">_writer.py</span></code>, <code class="docutils literal notranslate"><span class="pre">_control.py</span></code>.</p>
<p>Detector modules should include a reference <code class="docutils literal notranslate"><span class="pre">StandardDetector</span></code> subclass, but without making any site specific decisions about PV naming.</p>
</section>
<section id="tango">
<h3>tango<a class="headerlink" href="#tango" title="Link to this heading">#</a></h3>
<p>This has not been created at the time of writing, but it is envisioned that it will follow the EPICS structure where it makes sense.</p>
</section>
<section id="fastcs">
<h3>fastcs<a class="headerlink" href="#fastcs" title="Link to this heading">#</a></h3>
<p>There will be one subpackage for each FastCS Device. At the time of writing there are none of these, but PandA and Odin will shortly be converted to FastCS, so it makes sense to make:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">fastcs.panda</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">fastcs.odin</span></code></p></li>
</ul>
<p>in preparation.</p>
<p>For PandA its namespace should contain <code class="docutils literal notranslate"><span class="pre">CommonPandaBlocks</span></code>, <code class="docutils literal notranslate"><span class="pre">SeqBlock</span></code>, <code class="docutils literal notranslate"><span class="pre">PandaHdfWriter</span></code>, <code class="docutils literal notranslate"><span class="pre">PandaPcapController</span></code>, etc. These should be included in files like <code class="docutils literal notranslate"><span class="pre">_control.py</span></code>, <code class="docutils literal notranslate"><span class="pre">_writer.py</span></code>, <code class="docutils literal notranslate"><span class="pre">_block.py</span></code>, <code class="docutils literal notranslate"><span class="pre">_table.py</span></code> and imported into the <code class="docutils literal notranslate"><span class="pre">panda</span></code> namespace.</p>
</section>
<section id="planstubs">
<h3>planstubs<a class="headerlink" href="#planstubs" title="Link to this heading">#</a></h3>
<p>There will be some planstubs for shared setup that may reach across modules like <code class="docutils literal notranslate"><span class="pre">epics</span></code> and <code class="docutils literal notranslate"><span class="pre">fastcs/panda</span></code>, these should live in a <code class="docutils literal notranslate"><span class="pre">planstubs/</span></code> package.</p>
</section>
<section id="sim">
<h3>sim<a class="headerlink" href="#sim" title="Link to this heading">#</a></h3>
<p>There will be 2 subpackages:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">sim.demo</span></code> for demo devices like <code class="docutils literal notranslate"><span class="pre">PatternDetector</span></code> and <code class="docutils literal notranslate"><span class="pre">SimMotor</span></code> used in tutorials.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">sim.testing</span></code> for devices that will support tests in <code class="docutils literal notranslate"><span class="pre">ophyd-async</span></code> and <code class="docutils literal notranslate"><span class="pre">bluesky</span></code>. Some test fixtures could be moved here</p></li>
</ul>
<p>There should probably be one file per Device, in an underscore prefixed file reimported into the public namespace, e.g. <code class="docutils literal notranslate"><span class="pre">demo/_sim_motor.py</span></code> and <code class="docutils literal notranslate"><span class="pre">demo/_pattern_detector.py</span></code>.</p>
</section>
</section>
<section id="consequences">
<h2>Consequences<a class="headerlink" href="#consequences" title="Link to this heading">#</a></h2>
<p>The public import paths are fixed, but the underlying implementation can move from modules to packages without change to the public interface.</p>
</section>
</section>


                </article>
              
              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="0006-procedural-device-definitions.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">6. Procedural Device Definitions</p>
      </div>
    </a>
    <a class="right-next"
       href="0008-signal-types.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">8. Settle on Signal Types</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <dialog id="pst-secondary-sidebar-modal"></dialog>
                <div id="pst-secondary-sidebar" class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
<div
    id="pst-page-navigation-heading-2"
    class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc" aria-labelledby="pst-page-navigation-heading-2">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#status">Status</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#context">Context</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#decision">Decision</a><ul class="visible nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#core">core</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#epics">epics</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#tango">tango</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#fastcs">fastcs</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#planstubs">planstubs</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#sim">sim</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#consequences">Consequences</a></li>
</ul>
  </nav></div>

  <div class="sidebar-secondary-item">

  
  <div class="tocsection editthispage">
    <a href="https://github.com/bluesky/ophyd-async/edit/main/docs/explanations/decisions/0007-subpackage-structure.md">
      <i class="fa-solid fa-pencil"></i>
      
      
        
          Edit on GitHub
        
      
    </a>
  </div>
</div>

  <div class="sidebar-secondary-item">
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../_sources/explanations/decisions/0007-subpackage-structure.md.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script defer src="../../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf"></script>
<script defer src="../../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
  
  
    <div class="footer-items__end">
      
        <div class="footer-item">
<p class="theme-version">
  <!-- # L10n: Setting the PST URL as an argument as this does not need to be localized -->
  Built with the <a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">PyData Sphinx Theme</a> 0.16.1.
</p></div>
      
    </div>
  
</div>

  </footer>
  </body>
</html>