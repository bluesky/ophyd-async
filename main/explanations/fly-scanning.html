
<!DOCTYPE html>


<html lang="en" data-content_root="../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>What is the difference between step and fly scanning &#8212; ophyd-async 0.13.5.dev17+g353d42955 documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  <!--
    this give us a css class that will be invisible only if js is disabled
  -->
  <noscript>
    <style>
      .pst-js-only { display: none !important; }

    </style>
  </noscript>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../_static/plot_directive.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-design.min.css?v=95c83b7e" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css?v=3fefa004" />
  
  <!-- So that users can add custom icons -->
  <script src="../_static/scripts/fontawesome.js?digest=8878045cc6db502f8baf"></script>
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf" />

    <script src="../_static/documentation_options.js?v=dc2e3a30"></script>
    <script src="../_static/doctools.js?v=9bcbadda"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../_static/copybutton.js?v=30646c52"></script>
    <script src="../_static/design-tabs.js?v=f930bc37"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'explanations/fly-scanning';</script>
    <script>
        DOCUMENTATION_OPTIONS.theme_version = '0.16.1';
        DOCUMENTATION_OPTIONS.theme_switcher_json_url = 'https://blueskyproject.io/ophyd-async/switcher.json';
        DOCUMENTATION_OPTIONS.theme_switcher_version_match = 'main';
        DOCUMENTATION_OPTIONS.show_version_warning_banner =
            false;
        </script>
    <link rel="icon" href="../_static/ophyd-favicon.svg"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="What plan stubs will do to Devices" href="plan-stubs.html" />
    <link rel="prev" title="Devices, Signals and their Backends" href="devices-signals-backends.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  <meta name="docsearch:version" content="main" />
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <dialog id="pst-search-dialog">
    
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
  </dialog>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
<div class="bd-header__inner bd-page-width">
  <button class="pst-navbar-icon sidebar-toggle primary-toggle" aria-label="Site navigation">
    <span class="fa-solid fa-bars"></span>
  </button>
  
  
  <div class="col-lg-3 navbar-header-items__start">
    
      <div class="navbar-item">

  
    
  

<a class="navbar-brand logo" href="../index.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../_static/ophyd-async-logo.svg" class="logo__image only-light" alt="ophyd-async 0.13.5.dev17+g353d42955 documentation - Home"/>
    <img src="../_static/ophyd-async-logo.svg" class="logo__image only-dark pst-js-only" alt="ophyd-async 0.13.5.dev17+g353d42955 documentation - Home"/>
  
  
</a></div>
    
  </div>
  
  <div class="col-lg-9 navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item ">
  <a class="nav-link nav-internal" href="../tutorials.html">
    Tutorials
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../how-to.html">
    How-to Guides
  </a>
</li>


<li class="nav-item current active">
  <a class="nav-link nav-internal" href="../explanations.html">
    Explanations
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../reference.html">
    Reference
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-external" href="https://blueskyproject.io">
    Bluesky Project
  </a>
</li>

  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
        </div>
      
      
        <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
      
        <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/bluesky/ophyd-async" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-square-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://pypi.org/project/ophyd-async" title="PyPI" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fas fa-cube fa-lg" aria-hidden="true"></i>
            <span class="sr-only">PyPI</span></a>
        </li>
</ul></div>
      
        <div class="navbar-item">
<div class="version-switcher__container dropdown pst-js-only">
  <button id="pst-version-switcher-button-2"
    type="button"
    class="version-switcher__button btn btn-sm dropdown-toggle"
    data-bs-toggle="dropdown"
    aria-haspopup="listbox"
    aria-controls="pst-version-switcher-list-2"
    aria-label="Version switcher list"
  >
    Choose version  <!-- this text may get changed later by javascript -->
    <span class="caret"></span>
  </button>
  <div id="pst-version-switcher-list-2"
    class="version-switcher__menu dropdown-menu list-group-flush py-0"
    role="listbox" aria-labelledby="pst-version-switcher-button-2">
    <!-- dropdown will be populated by javascript on page load -->
  </div>
</div></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
    </div>
  

  
    <button class="pst-navbar-icon sidebar-toggle secondary-toggle" aria-label="On this page">
      <span class="fa-solid fa-outdent"></span>
    </button>
  
</div>

    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <dialog id="pst-primary-sidebar-modal"></dialog>
      <div id="pst-primary-sidebar" class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          
          
            <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item ">
  <a class="nav-link nav-internal" href="../tutorials.html">
    Tutorials
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../how-to.html">
    How-to Guides
  </a>
</li>


<li class="nav-item current active">
  <a class="nav-link nav-internal" href="../explanations.html">
    Explanations
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../reference.html">
    Reference
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-external" href="https://blueskyproject.io">
    Bluesky Project
  </a>
</li>

  </ul>
</nav></div>
          
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
        
          <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/bluesky/ophyd-async" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-square-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://pypi.org/project/ophyd-async" title="PyPI" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fas fa-cube fa-lg" aria-hidden="true"></i>
            <span class="sr-only">PyPI</span></a>
        </li>
</ul></div>
        
          <div class="navbar-item">
<div class="version-switcher__container dropdown pst-js-only">
  <button id="pst-version-switcher-button-3"
    type="button"
    class="version-switcher__button btn btn-sm dropdown-toggle"
    data-bs-toggle="dropdown"
    aria-haspopup="listbox"
    aria-controls="pst-version-switcher-list-3"
    aria-label="Version switcher list"
  >
    Choose version  <!-- this text may get changed later by javascript -->
    <span class="caret"></span>
  </button>
  <div id="pst-version-switcher-list-3"
    class="version-switcher__menu dropdown-menu list-group-flush py-0"
    role="listbox" aria-labelledby="pst-version-switcher-button-3">
    <!-- dropdown will be populated by javascript on page load -->
  </div>
</div></div>
        
      </div>
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
<nav class="bd-docs-nav bd-links"
     aria-label="Section Navigation">
  <p class="bd-links__title" role="heading" aria-level="1">Section Navigation</p>
  <div class="bd-toc-item navbar-nav"><ul class="current nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="decisions.html">Architectural Decision Records</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="decisions/0001-record-architecture-decisions.html">1. Record architecture decisions</a></li>
<li class="toctree-l2"><a class="reference internal" href="decisions/0002-switched-to-python-copier-template.html">2. Adopt python-copier-template for project structure</a></li>
<li class="toctree-l2"><a class="reference internal" href="decisions/0003-ophyd-async-migration.html">3. Ophyd Async migration</a></li>
<li class="toctree-l2"><a class="reference internal" href="decisions/0004-repository-structure.html">4. Repository Structure</a></li>
<li class="toctree-l2"><a class="reference internal" href="decisions/0005-respect-black-line-length.html">5. Respect black line length</a></li>
<li class="toctree-l2"><a class="reference internal" href="decisions/0006-procedural-device-definitions.html">6. Procedural Device Definitions</a></li>
<li class="toctree-l2"><a class="reference internal" href="decisions/0007-subpackage-structure.html">7. Sub-package Structure</a></li>
<li class="toctree-l2"><a class="reference internal" href="decisions/0008-signal-types.html">8. Settle on Signal Types</a></li>
<li class="toctree-l2"><a class="reference internal" href="decisions/0009-procedural-vs-declarative-devices.html">9. Procedural vs Declarative Devices</a></li>
<li class="toctree-l2"><a class="reference internal" href="decisions/0010-docstring-format.html">10. Decide on docstring format</a></li>
<li class="toctree-l2"><a class="reference internal" href="decisions/0011-buffer-updates-camonitor.html">11. Buffer updates when using <code class="docutils literal notranslate"><span class="pre">camonitor</span></code></a></li>
</ul>
</details></li>
<li class="toctree-l1"><a class="reference internal" href="declarative-vs-procedural.html">Declarative vs Procedural Devices</a></li>
<li class="toctree-l1"><a class="reference internal" href="design-goals.html">Design goals and differences with ophyd sync</a></li>
<li class="toctree-l1"><a class="reference internal" href="device-connection-strategies.html">Device connection strategies</a></li>
<li class="toctree-l1"><a class="reference internal" href="devices-signals-backends.html">Devices, Signals and their Backends</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">What is the difference between step and fly scanning</a></li>
<li class="toctree-l1"><a class="reference internal" href="plan-stubs.html">What plan stubs will do to Devices</a></li>
<li class="toctree-l1"><a class="reference internal" href="when-to-extend-movable.html">When should a device extend movable</a></li>
<li class="toctree-l1"><a class="reference internal" href="where-device-logic.html">Where should Device logic live?</a></li>
</ul>
</div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
      <div class="sidebar-primary-item">
<div id="ethical-ad-placement"
      class="flat"
      data-ea-publisher="readthedocs"
      data-ea-type="readthedocs-sidebar"
      data-ea-manual="true">
</div></div>
  </div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">

<nav aria-label="Breadcrumb" class="d-print-none">
  <ul class="bd-breadcrumbs">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="../index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    
    <li class="breadcrumb-item"><a href="../explanations.html" class="nav-link">Explanations</a></li>
    
    <li class="breadcrumb-item active" aria-current="page"><span class="ellipsis">What is the difference between step and fly scanning</span></li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="what-is-the-difference-between-step-and-fly-scanning">
<h1>What is the difference between step and fly scanning<a class="headerlink" href="#what-is-the-difference-between-step-and-fly-scanning" title="Link to this heading">#</a></h1>
<p>A scan is defined as actuating some change in zero or more Devices, then collecting data from zero or more detectors to observe that change. Some examples are:</p>
<ul class="simple">
<li><p>moving a motorized stage with a sample on it, and observing its interaction with the X-ray beam on a pair of detectors simultaneously</p></li>
<li><p>taking a series of time resolved detector frames to observe the degredation of a sample</p></li>
<li><p>changing the temperature of the sample and observing it with a detector</p></li>
</ul>
<p>The actuators and detectors in a scan are typically different devices, although many actuators allow the current readback position to be read, so will also be used as a source of data during a scan.</p>
<p>We can classify these data collections into two broad categories: step scanning, and fly scanning.</p>
<ul class="simple">
<li><p>Step scanning: The system performs a sequence of discrete operations: actuate a change, settle, acquire data, repeat. This ensures well-defined data points but may result in longer total acquisition times. Bluesky plans specify this type of measurement through devices’ <a class="reference external" href="https://blueskyproject.io/bluesky/main/hardware.html#bluesky.protocols.Movable" title="bluesky 1.14.7.dev2+g8adfe3ab1"><span class="xref myst">Movable</span></a>, <a class="reference external" href="https://blueskyproject.io/bluesky/main/hardware.html#bluesky.protocols.Triggerable" title="bluesky 1.14.7.dev2+g8adfe3ab1"><span class="xref myst">Triggerable</span></a> and <a class="reference external" href="https://blueskyproject.io/bluesky/main/hardware.html#bluesky.protocols.Readable" title="bluesky 1.14.7.dev2+g8adfe3ab1"><span class="xref myst">Readable</span></a> protocols.</p></li>
<li><p>Fly scanning: Short for “on-the-fly scanning,” this method involves kicking off the actuation and detection processes simultaneously, with some form of synchronization that allows the data to be correlated after the scan. This effectively hands over some degree of control to the hardware, with bluesky supervising the progress it is making without being in the loop. The benefits are typically faster scans and smoother coverage of the scanned domain, but it adds complexity in the supervision and synchronization of concurrent processes. Devices capable of this mode implement the <a class="reference external" href="https://blueskyproject.io/bluesky/main/hardware.html#bluesky.protocols.Preparable" title="bluesky 1.14.7.dev2+g8adfe3ab1"><span class="xref myst">Preparable</span></a>, <a class="reference external" href="https://blueskyproject.io/bluesky/main/hardware.html#bluesky.protocols.Flyable" title="bluesky 1.14.7.dev2+g8adfe3ab1"><span class="xref myst">Flyable</span></a> and <a class="reference external" href="https://blueskyproject.io/bluesky/main/hardware.html#bluesky.protocols.Collectable" title="bluesky 1.14.7.dev2+g8adfe3ab1"><span class="xref myst">Collectable</span></a> protocols.</p></li>
</ul>
<p>Filewriting detectors additionally implement <a class="reference external" href="https://blueskyproject.io/bluesky/main/hardware.html#bluesky.protocols.WritesStreamAssets" title="bluesky 1.14.7.dev2+g8adfe3ab1"><span class="xref myst">WritesStreamAssets</span></a> to report the data written to disk during the scan, either at each data point in a step scan, or periodically during a fly scan.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="plan-stubs.html"><span class="std std-doc">What plan stubs will do to Devices</span></a> for more information on what plan stubs are available that call these protocols</p>
</div>
<section id="scan-frames-and-collection-windows">
<h2>Scan frames and collection windows<a class="headerlink" href="#scan-frames-and-collection-windows" title="Link to this heading">#</a></h2>
<p>Consider some trajectory in 2D space:</p>
<p><img alt="A fly scan trajectory with collection windows containing frames" src="../_images/fly_scan_collection_windows_and_frames.svg" /></p>
<p>Along the fly scan trajectory we define a discrete sequence of (typically disjoint rather than adjacent) collection windows,
which are spatial intervals where a coherent block of data is acquired.
The data collection block is the scan frame, defined as <a class="reference external" href="https://blueskyproject.io/scanspec/main/explanations/technical-terms.html#frame" title="scanspec main">a vector of lower, mid and upper points in scan space</a>.
Scan frames map directly to Bluesky <a class="reference external" href="https://blueskyproject.io/event-model/main/explanations/data-model.html#event" title="event-model main">Events</a>, and typically corresponds to a single detector exposure, though they may be composed of multiple detector frames.</p>
</section>
<section id="synchronisation-mechanisms">
<h2>Synchronisation mechanisms<a class="headerlink" href="#synchronisation-mechanisms" title="Link to this heading">#</a></h2>
<p>A fly scan must define the start of each collection window and a mechanism for the acquisition of frames within those windows.
Various mechanisms can be used, depending on the available hardware and experimental requirements. Not all combinations of collection window and scan frame triggers provide useful results, so some examples are given below.</p>
<section id="collection-window-triggers">
<h3>Collection window triggers<a class="headerlink" href="#collection-window-triggers" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>Software trigger: The control software signals the start of the next window. For example, a plan kicks off a linear motor move, and starts a free-running detector when it expects the motor to reach a desired constant velocity.</p></li>
<li><p>Time trigger: A window opens at predefined time intervals (this could be a software or a hardware trigger e.g. from a PandA box).</p></li>
<li><p>Readback trigger: A hardware trigger sent when a signal from a sensor or encoder value is positively evaluated through some position compare logic.</p></li>
<li><p>Setpoint trigger: The same control signal sent to some device (e.g. a sample environment controller) also triggering the start of the collection window.</p></li>
</ul>
</section>
<section id="scan-frame-triggers">
<h3>Scan frame triggers<a class="headerlink" href="#scan-frame-triggers" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>Internal device trigger: The detector itself generates internal triggers based on its configuration.</p></li>
<li><p>Time trigger: Hardware triggers sent out at regularly spaced intervals in time.</p></li>
<li><p>Readback trigger: Same as for collection windows readback triggers.</p></li>
<li><p>Setpoint trigger: Same as for collection windows setpoint triggers.</p></li>
</ul>
<p>When a hardware trigger is sent to a detector, it can either be edge triggered (start a frame of a fixed duration on rising edge of trigger) or level triggered (start a frame on rising edge of trigger, stop the frame on falling edge).</p>
</section>
</section>
<section id="examples">
<h2>Examples<a class="headerlink" href="#examples" title="Link to this heading">#</a></h2>
<p>With all this in mind, let us consider typical fly scanning setups given a motor and a detector.</p>
<section id="software-collection-window-with-internal-triggers">
<h3>Software collection window with internal triggers<a class="headerlink" href="#software-collection-window-with-internal-triggers" title="Link to this heading">#</a></h3>
<p>The simplest form of fly scanning uses software synchronisation for opening a collection window, and letting a detector trigger itself internally.
We effectively tell the devices to “go” at the same time, relying on timestamps to match up the data. The strategy may involve</p>
<ul class="simple">
<li><p>Calculating the motor run-up distance and move to the start, setting up the detector to take the right number of frames,</p></li>
<li><p>Starting the motor moving to its end point and waiting for the amount of time it takes to accelerate</p></li>
<li><p>Starting the detector</p></li>
<li><p>Waiting until the detector has finished taking frames and the motor has stopped moving</p></li>
</ul>
<p>This process would produce two data stream: a “monitor” stream of timestamped motor readback positions at the control system update rate;
and a “primary” stream of detector frames with embedded timestamps when they were received by the control point.</p>
</section>
<section id="software-collection-window-with-time-triggers">
<h3>Software collection window with time triggers<a class="headerlink" href="#software-collection-window-with-time-triggers" title="Link to this heading">#</a></h3>
<p>If we introduce a PandA box into the system we can trigger the collection window as above, but let the PandA produce time triggers for the detector.
The strategy is similar:</p>
<ul class="simple">
<li><p>Calculate motor run-up distance and move to the start, setting the detector into triggered mode and PandA to send the right number of triggers</p></li>
<li><p>Start the motor moving to its end point and wait for the amount of time it takes to accelerate</p></li>
<li><p>Start the PandA sending triggers</p></li>
<li><p>Wait until the PandA, detector and motor have finished</p></li>
</ul>
<p>The data streams produced are a “monitor” stream of timestamped motor readback positions at the control system update rate;
and a “primary” stream of PandA captured timestamps and detector frames. If the motor happens to be plugged into the PandA
then we can dispense with the monitor stream as the motor positions can be captured and produced by the PandA.</p>
</section>
<section id="readback-collection-window-with-readback-triggers">
<h3>Readback collection window with readback triggers<a class="headerlink" href="#readback-collection-window-with-readback-triggers" title="Link to this heading">#</a></h3>
<p>If the motor positions are tracked in the PandA we can use a PCOMP block to trigger both collection windows and frames within.
This gives the advantage that our detector will trigger at the precise motor positions we expect, but the detector must be able to support level triggering so that it doesn’t miss frames if the motor travels faster than expected in a particular frame.
The strategy and data streams are as in the previous example.</p>
</section>
<section id="readback-collection-window-with-time-triggers">
<h3>Readback collection window with time triggers<a class="headerlink" href="#readback-collection-window-with-time-triggers" title="Link to this heading">#</a></h3>
<p>Similar to above, but if the detector is only capable of edge triggering then we need to give it a constant time period so it doesn’t miss frames. We do this by sending regularly spaced triggers from a PandA and capturing the positions that the motors were at.</p>
</section>
<section id="setpoint-collection-window-with-setpoint-triggers">
<h3>Setpoint collection window with setpoint triggers<a class="headerlink" href="#setpoint-collection-window-with-setpoint-triggers" title="Link to this heading">#</a></h3>
<p>It is worth mentioning that the Flyer protocol is also used in hardware-triggered step scanning. Though the collection occurs while the scanned axis is stationary,
the devices are prepared, kicked off, and completed in a similar way to fly scans.</p>
</section>
</section>
</section>


                </article>
              
              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="devices-signals-backends.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Devices, Signals and their Backends</p>
      </div>
    </a>
    <a class="right-next"
       href="plan-stubs.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">What plan stubs will do to Devices</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <dialog id="pst-secondary-sidebar-modal"></dialog>
                <div id="pst-secondary-sidebar" class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
<div
    id="pst-page-navigation-heading-2"
    class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc" aria-labelledby="pst-page-navigation-heading-2">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#scan-frames-and-collection-windows">Scan frames and collection windows</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#synchronisation-mechanisms">Synchronisation mechanisms</a><ul class="visible nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#collection-window-triggers">Collection window triggers</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#scan-frame-triggers">Scan frame triggers</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#examples">Examples</a><ul class="visible nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#software-collection-window-with-internal-triggers">Software collection window with internal triggers</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#software-collection-window-with-time-triggers">Software collection window with time triggers</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#readback-collection-window-with-readback-triggers">Readback collection window with readback triggers</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#readback-collection-window-with-time-triggers">Readback collection window with time triggers</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#setpoint-collection-window-with-setpoint-triggers">Setpoint collection window with setpoint triggers</a></li>
</ul>
</li>
</ul>
  </nav></div>

  <div class="sidebar-secondary-item">

  
  <div class="tocsection editthispage">
    <a href="https://github.com/bluesky/ophyd-async/edit/main/docs/explanations/fly-scanning.md">
      <i class="fa-solid fa-pencil"></i>
      
      
        
          Edit on GitHub
        
      
    </a>
  </div>
</div>

  <div class="sidebar-secondary-item">
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/explanations/fly-scanning.md.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script defer src="../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf"></script>
<script defer src="../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
  
  
    <div class="footer-items__end">
      
        <div class="footer-item">
<p class="theme-version">
  <!-- # L10n: Setting the PST URL as an argument as this does not need to be localized -->
  Built with the <a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">PyData Sphinx Theme</a> 0.16.1.
</p></div>
      
    </div>
  
</div>

  </footer>
  </body>
</html>